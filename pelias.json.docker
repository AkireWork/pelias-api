{
  "esclient": {
    "apiVersion": "6.8",
    "keepAlive": true,
    "requestTimeout": "20000",
    "hosts": [
      {
        "env": "production",
        "protocol": "http",
        "host": "pelias_elasticsearch",
        "port": 9200
      },
      {
        "env": "production",
        "protocol": "http",
        "host": "pelias_elasticsearch",
        "port": 9300
      }
    ]
  },
  "logger": {
    "level": ["error", "warning"]
  },
  "acceptance-tests": {
    "endpoints": {
      "dev": "http://api.dev.peatus.ee/geocoding/v1/"
    }
  },
  "api" : {
    "indexName": "pelias",
    "version": "1.0",
    "targets": {
      "canonical_sources": ["whosonfirst", "openstreetmap", "openaddresses", "geonames", "gtfs"],
      "layers_by_source": {
        "gtfs": [ "stop", "station" ]
      },
      "source_aliases": {
        "gtfs": ["gtfs"]
      }
    },
    "textAnalyzer": "libpostal",
    "sizePadding": 12,
    "minConfidence": 0.2,
    "relativeMinConfidence": 0.4,
    "languageMatchThreshold": 0.4,
    "query": {
      "search": {
        "disableFallback": true,
        "defaults": {
          "ngram:analyzer": "peliasIndexOneEdgeGram",
          "ngram:multifield": ["name.*"],
          "phrase:multifield": ["name.*"],
          "address:housenumber:boost": 0.5,
          "address:street:boost": 1,
          "admin:localadmin:boost": 0.1,
          "admin:county:boost": 0.5,
          "admin:locality:boost": 0.5
        }
      },
      "autocomplete": {
        "defaults": {
          "ngram:multifield": ["name.*"],
          "phrase:multifield": ["name.*"]
        }
      }
    },
    "languages": [
      "et",
      "default",
      "en",
      "local",
      "alternative",
      "international",
      "national",
      "official",
      "old",
      "regional",
      "short",
      "sorting"
    ],
    "languageMap": {
      "default":"et",
      "local":"et",
      "alternative":"et",
      "international":"et",
      "national":"et",
      "official":"et",
      "old":"et",
      "regional":"et",
      "short":"et",
      "sorting":"et"
    },
    "localization" : {
      "confidenceAdminWeights": {
        "localadmin": 0.2,
        "locality": 0.4,
        "neighbourhood": 0.2,
        "region": 0.2,
        "county": 0.4,
        "country": 0.1,
        "street": 0.2
      },
      "confidenceAddressParts": {
	"number": {"parent":"address_parts", "field":"number", "numeric": true, "weight": 0.5},
        "street": {"parent":"address_parts", "field":"street", "numeric": false, "weight": 2}
      },
      "filteredRegions": ["eesti", "estonia"],
      "cleanRegions": true,
      "postalCodeValidator": "^[0-9]{5}$",
      "streetNumberValidator": "^[0-9].*$",
      "translations": "/opt/pelias/api/translations.json",
      "equalCharMap": {
        "ï¿½":"e",
        "'":"",
        "-":" "
      },
      "labelSchemas": {
        "FIN": {
          "address": { "fields": [["street", "housenumber"], "neighbourhood"], "matchType": "first", "targets": ["venue", "stop", "station"] },
          "local": { "fields": ["localadmin", "locality"], "matchType": "best" }
        }
      }
    }
  }
}
